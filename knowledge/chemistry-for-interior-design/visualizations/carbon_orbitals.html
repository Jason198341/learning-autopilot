<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carbon Orbitals 3D</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: white;
        }
        .container { max-width: 900px; margin: 0 auto; padding: 20px; }
        h1 { text-align: center; margin-bottom: 10px; color: #00d4ff; }
        .subtitle { text-align: center; color: #888; margin-bottom: 20px; }
        #canvas-container {
            width: 100%;
            height: 500px;
            background: #0a0a15;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }
        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
        }
        .btn-all { background: linear-gradient(45deg, #667eea, #764ba2); color: white; }
        .btn-1s { background: linear-gradient(45deg, #f093fb, #f5576c); color: white; }
        .btn-2s { background: linear-gradient(45deg, #4facfe, #00f2fe); color: white; }
        .btn-2p { background: linear-gradient(45deg, #43e97b, #38f9d7); color: white; }
        .btn-bond { background: linear-gradient(45deg, #fa709a, #fee140); color: #333; }
        button:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(0,0,0,0.3); }
        .info-box {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
        }
        .legend { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
        .legend-item { display: flex; align-items: center; gap: 8px; }
        .legend-dot { width: 15px; height: 15px; border-radius: 50%; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Carbon (C) Orbital Structure</h1>
        <p class="subtitle">탄소의 전자 배치: 1s² 2s² 2p²</p>

        <div id="canvas-container"></div>

        <div class="controls">
            <button class="btn-all" onclick="showAll()">전체</button>
            <button class="btn-1s" onclick="show1s()">1s 오비탈</button>
            <button class="btn-2s" onclick="show2s()">2s 오비탈</button>
            <button class="btn-2p" onclick="show2p()">2p 오비탈</button>
            <button class="btn-bond" onclick="showBonds()">결합 (4개의 손)</button>
        </div>

        <div class="info-box">
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-dot" style="background: #f5576c;"></div>
                    <span>1s (전자 2개)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot" style="background: #4facfe;"></div>
                    <span>2s (전자 2개)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot" style="background: #43e97b;"></div>
                    <span>2p (전자 2개, 빈방 1개)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot" style="background: #333;"></div>
                    <span>핵 (양성자 6개)</span>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script>
        let scene, camera, renderer, controls;
        let orbitals = { s1: null, s2: null, px: null, py: null, pz: null, bonds: null };

        function init() {
            const container = document.getElementById('canvas-container');

            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(60, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.set(5, 3, 5);

            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(container.clientWidth, container.clientHeight);
            renderer.setClearColor(0x0a0a15, 1);
            container.appendChild(renderer.domElement);

            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;

            // Lights
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.4);
            scene.add(ambientLight);
            const pointLight = new THREE.PointLight(0xffffff, 1);
            pointLight.position.set(10, 10, 10);
            scene.add(pointLight);

            // Nucleus
            const nucleusGeo = new THREE.SphereGeometry(0.3, 32, 32);
            const nucleusMat = new THREE.MeshPhongMaterial({ color: 0x333333 });
            const nucleus = new THREE.Mesh(nucleusGeo, nucleusMat);
            scene.add(nucleus);

            // 1s orbital (small sphere)
            const s1Geo = new THREE.SphereGeometry(0.8, 32, 32);
            const s1Mat = new THREE.MeshPhongMaterial({
                color: 0xf5576c,
                transparent: true,
                opacity: 0.4
            });
            orbitals.s1 = new THREE.Mesh(s1Geo, s1Mat);
            scene.add(orbitals.s1);

            // 2s orbital (larger sphere)
            const s2Geo = new THREE.SphereGeometry(1.5, 32, 32);
            const s2Mat = new THREE.MeshPhongMaterial({
                color: 0x4facfe,
                transparent: true,
                opacity: 0.3
            });
            orbitals.s2 = new THREE.Mesh(s2Geo, s2Mat);
            scene.add(orbitals.s2);

            // 2p orbitals (dumbbells)
            const pMaterial = new THREE.MeshPhongMaterial({
                color: 0x43e97b,
                transparent: true,
                opacity: 0.5
            });
            const pMaterialDim = new THREE.MeshPhongMaterial({
                color: 0x43e97b,
                transparent: true,
                opacity: 0.15
            });

            // px
            orbitals.px = createDumbbell(pMaterial);
            orbitals.px.rotation.z = Math.PI / 2;
            scene.add(orbitals.px);

            // py
            orbitals.py = createDumbbell(pMaterial);
            scene.add(orbitals.py);

            // pz (empty - dimmer)
            orbitals.pz = createDumbbell(pMaterialDim);
            orbitals.pz.rotation.x = Math.PI / 2;
            scene.add(orbitals.pz);

            // Bonds (sp3 hybridization - tetrahedral)
            orbitals.bonds = new THREE.Group();
            const bondMat = new THREE.MeshPhongMaterial({ color: 0xfa709a });
            const hydrogenMat = new THREE.MeshPhongMaterial({ color: 0xffffff });

            const tetrahedralAngle = 109.47 * Math.PI / 180;
            const bondLength = 2.5;
            const positions = [
                [0, bondLength, 0],
                [bondLength * Math.sin(tetrahedralAngle), -bondLength * Math.cos(tetrahedralAngle) / 3, 0],
                [-bondLength * Math.sin(tetrahedralAngle) / 2, -bondLength * Math.cos(tetrahedralAngle) / 3, bondLength * Math.sin(tetrahedralAngle) * 0.866],
                [-bondLength * Math.sin(tetrahedralAngle) / 2, -bondLength * Math.cos(tetrahedralAngle) / 3, -bondLength * Math.sin(tetrahedralAngle) * 0.866]
            ];

            positions.forEach(pos => {
                // Bond cylinder
                const bondGeo = new THREE.CylinderGeometry(0.08, 0.08, bondLength * 0.8, 16);
                const bond = new THREE.Mesh(bondGeo, bondMat);
                bond.position.set(pos[0] * 0.4, pos[1] * 0.4, pos[2] * 0.4);
                bond.lookAt(new THREE.Vector3(0, 0, 0));
                bond.rotateX(Math.PI / 2);
                orbitals.bonds.add(bond);

                // Hydrogen atom
                const hGeo = new THREE.SphereGeometry(0.25, 16, 16);
                const h = new THREE.Mesh(hGeo, hydrogenMat);
                h.position.set(pos[0], pos[1], pos[2]);
                orbitals.bonds.add(h);
            });

            orbitals.bonds.visible = false;
            scene.add(orbitals.bonds);

            animate();
        }

        function createDumbbell(material) {
            const group = new THREE.Group();
            const lobeGeo = new THREE.SphereGeometry(0.6, 32, 32);
            lobeGeo.scale(1, 1.5, 1);

            const lobe1 = new THREE.Mesh(lobeGeo, material);
            lobe1.position.y = 1;
            group.add(lobe1);

            const lobe2 = new THREE.Mesh(lobeGeo, material);
            lobe2.position.y = -1;
            group.add(lobe2);

            return group;
        }

        function showAll() {
            Object.values(orbitals).forEach(o => { if(o) o.visible = true; });
            orbitals.bonds.visible = false;
        }

        function show1s() {
            Object.values(orbitals).forEach(o => { if(o) o.visible = false; });
            orbitals.s1.visible = true;
        }

        function show2s() {
            Object.values(orbitals).forEach(o => { if(o) o.visible = false; });
            orbitals.s2.visible = true;
        }

        function show2p() {
            Object.values(orbitals).forEach(o => { if(o) o.visible = false; });
            orbitals.px.visible = true;
            orbitals.py.visible = true;
            orbitals.pz.visible = true;
        }

        function showBonds() {
            Object.values(orbitals).forEach(o => { if(o) o.visible = false; });
            orbitals.bonds.visible = true;
        }

        function animate() {
            requestAnimationFrame(animate);
            controls.update();
            renderer.render(scene, camera);
        }

        init();
        showAll();
    </script>
</body>
</html>
